---
title: "CAB432 Project Report"
author:
- "Christian Bunn - n11092505"
---

# Application overview
This file-cracking application enables users to upload encrypted files and initiate cracking jobs to retrieve file passwords. 
The system processes these requests via AWS-managed resources (all mentioned below), leveraging ECS and microservices for distributed job handling, and returns passwords (not cracked files) securely. 
Users must authenticate, and multi-factor authentication (MFA) is available for added security.

# Application architecture

Service Breakdown:
- S3: Stores encrypted user-uploaded files securely, accessible only through presigned URLs generated by the backend (backend/crack/s3.js).
- Cognito: Manages user authentication, including MFA, enabling secure user sessions (backend/cognito/).
- DynamoDB: Tracks metadata for cracking jobs, such as user ID, file, job status, and results, ensuring persistent data storage for job management (backend/crack/db.js, cracker/crack/db.js).
- SQS: Queues cracking jobs for asynchronous processing, allowing the backend to scale as demand increases (backend/sqs/sqs.js).
- ECS (Backend & Cracker Services):
 - Backend Service: Handles user requests, authentication, and manages file upload/download through S3 and job queuing with SQS (backend/server.js).
 - Cracker Service: Executes the password-cracking process by pulling jobs from SQS, retrieving files from S3, performing the cracking task, and storing results in DynamoDB (cracker/crack/server.js).
-Memcached: Used to cache presigned S3 URLs, improving performance by reducing redundant requests (backend/crack/s3.js, cracker/crack/s3.js).


Justification Of Architecture
Division into Microservices 
 - The decision to divide functionality into frontend, backend, and cracker services was driven by the need for modularity and scalability. By isolating the CPU-intensive password-cracking operations in a seperate service, the architecture ensures that high CPU usage does not impact the reponsivness of user-facing components. This separation also allows each service to scale independently based on its resource demands, optimising both cost and performace.

Choice of Compute (ECS over Lambda or EC2)
 - Backend, frontend, and cracker services on ECS: ECS with fargate was chose in managing containsersied workloads. ECS allowed me to run tasks for extended periods, which was needed for password cracking jobs that can be long running.

Communication Mechanism (SQS)
 - Relational for Using SQS: SQS was selected for its job queuing. This design allowed for me to have the backend submit jobs without waiting for the cracking process to complete. Additionally this allowed for jobs of different lengths to be running independently of one another. 

Load Distribution and HTTPS with ALB (scalability is mentioned here)
- The ALB is configured specifically for HTTPS
- Rationale for Custom Mechanism: Instead of relying solely on the ALB for load distribution, a custom mechanism was implemented using SQS and ECS. SQS serves as a job queue, allowing the backend to submit cracking jobs, while ECS dynamically scales cracker service tasks based on the number of messages in the SQS queue. This custom approach effectively manages workload distribution across services, enabling the system to handle job surges and scale resources in response to real-time demand.


## Project Core - Microservices

- **First service functionality:** Hosts the UI/frontend interface that users interact with to initiate file-cracking jobs and manage their accounts.
- **First service compute:** 
  - ECS n11092505, Service frontend (arn:aws:ecs:ap-southeast-2:901444280953:service/n11092505/frontend)
  - Task frontend (arn:aws:ecs:ap-southeast-2:901444280953:task/n11092505/a0f6b53544c14dd78cbca19136aa984a)
- **First service source files:**
  - crack-api/frontend/*

- **Second service functionality:** Handles user requests, completes Cognito authentication, initiates crack services, and manages interactions with S3 (for file storage) and SQS (for job queuing).
- **Second service compute:** 
  - ECS n11092505, cluster backend (arn:aws:ecs:ap-southeast-2:901444280953:service/n11092505/backend)
  - Task frontend (arn:aws:ecs:ap-southeast-2:901444280953:task/n11092505/5d2a9ff788e8425393e51a864a03ab32)
- **Second service source files:**
  - crack-api/backend/*

- **Video timestamp:** 0:00 - 0:55


## Project Additional - Additional microservices

- **Third service functionality:** Responsible for processing password-cracking jobs by receiving tasks from the backend via SQS and executing the cracking process.
- **Third service compute:** ECS n11092505. (This service is dependent on wether a crack job has been submitted and is not running 24/7, so the service id cannot be provided)
- **Third service source files:**
  - crack-api/crack

- **Fourth service functionality:**
- **Fourth service compute:**
- **Fourth service source files:**
  - 

- **Video timestamp:** 0:00 - 0:55 and 3:00 - 3:07


## Project Additional - Serverless functions

- **Service(s) deployed on Lambda:**
- **Video timestamp:**
- **Relevant files:**
    -


## Project Additional - Container orchestration with ECS

- **ECS cluster name:** n11092505
- **Task definition names:** backend:6 and frontend:1 and cracker:6
- **Video timestamp:** 0:00 - 0:55
- **Relevant files:**
    - crack-api/create-cluster.sh
    - crack-api/ecs-params.yml
    - backend/ecs-params.yml
    - backend/crack/ecs.js
    - backend/server.js
    - frontend/ecs-paramas.yml


## Project Core - Load distribution

- **Load distribution mechanism:** [eg. SQS, ALB,...]
- **Mechanism instance name:** [eg. n1234567-project-alb]
- **Video timestamp:**
- **Relevant files:**
    -


## Project Additional - Communication mechanisms

- **Communication mechanism(s):** SQS (Simple Queue service)
- **Mechanism instance name:** n11092505-crack-queue
- **Video timestamp:** 1:48 - 1:57
- **Relevant files:**
    - backend/sqs/sqs.js
    - backend/server.js


## Project Core - Autoscaling

- **EC2 Auto-scale group or ECS Service name:** ECS service name "n11092505"
- **Video timestamp:** 1:27 - 4:41
- **Relevant files:**
    - backend/crack/ecs.js
    - backend/crack/sqs.js
    - cracker/crack/crack.js
    - cracker/crack/db.js
    - cracker/crack/s3.js
    - cracker/server.js

## Project Additional - Custom scaling metric

- **Description of metric:** Number of jobs in the queue
- **Implementation:** messages send to SQS determine the creation and deletion of the task in ECS
- **Rationale:** regardless of small or large scales, each job is given its own instance/service. This number can be as big or as little as needed, it completely depends on the amount of cracking jobs submitted by the user. 
- **Video timestamp:** 1:47 - 2:33
- **Relevant files:**
    - backend/crack/ecs.js
    - backend/crack/sqs.js


## Project Core - HTTPS

- **Domain name:** cracker.cab432.com
- **Certificate ID:** 1c8647b3-d1b9-4811-80ce-bdd325ff40c7
- **ALB/API Gateway name:** n11092505-loadbalancer-crack
- **Video timestamp:** 4:43 - 5:06
- **Relevant files:**
    -


## Project Additional - Container orchestration features

- **First additional ECS feature:** [eg. service discovery]
- **Second additional ECS feature:**
- **Video timestamp:**
- **Relevant files:**
    -


## Project Additional - Infrastructure as Code

- **Technology used:** [eg. CloudFormation, Terraform, ...]
- **Services deployed:** [eg. ALB, SQS, ....  Only Block 3 services need to be listed]
- **Video timestamp:**
- **Relevant files:**
    -


## Project Additional - Edge Caching

- **Cloudfront Distribution ID:**
- **Content cached:**
- **Rationale for caching:**
- **Video timestamp:**
- **Relevant files:**
    -


## Project Additional - Other (with prior permission only)

- **Description:**
- **Video timestamp:**
- **Relevant files:**
    -   


# Cost estimate
- Certificate Manager: Free with ALB
- Target Groups: Included in ALB costs
- IAM: Free
- Route 53: Monthly cost 4.50 USD: https://calculator.aws/#/estimate?id=07071cdb27a64460f8005d807672ac79a25fdba3
- ECS: Monthly cost 0.46 USD: https://calculator.aws/#/estimate?id=8e84f2097f526bdadf86a826d01e4523b624458c
- DynamoDB: Monthly cost 30.11 USD: https://calculator.aws/#/estimate?id=f181c0d8bd4a51b64813bfd4ac6e79fa164e93ad
- S3: Monthly cost 0.34 USD: https://calculator.aws/#/estimate?id=95fc85f0d29534cb224f7b140210adb569e3eb65
- Cognito: Monthly cost 25.00 USD: https://calculator.aws/#/estimate?id=27cd379997b32b73207687d8a02ebfbec261fee6s
- Load Balancer: Monthly cost 19.86 USD: https://calculator.aws/#/estimate?id=dc694dd1b0d7baaf82d11d380e7b6332bdd1873d


# Scaling up
For the hyperthetical situation of 10,000 concurrent users:
Microservices:
- The introduction of authentication and fiel handling as dedicated microservices, would allow each service to scale independently based on demand. 
- Improved isolation and scalability for only the high-demand functions would reduce the likelyhood potential bottlenecks.

Compute Resources
- From my understanding EC2 is more cost efficient, so could consider using EC2 for the CPU-intensive tasks, for better cost. 
- ECS remains flexible for general tasks, but EC2 is more appealing when cost is considered.

Load Distribution
- For the custom scaling I did, I could consider using long polling on the SQS queue. this would reduce idle time and costs. Which would probably help with the higher job volumes.
- While my load distribution is managed by a custom mechanism, adding more ALBS could support the increase of HTTPS requests. 
- Optimising SQS alongs with my custom distribution strategy, so this makes the most sense.

# Security
Based on the hyperthetical of cyber attack issues, the exisitng measures to prevent or combact this that are in place are:
Authentication:
- Cognito with MFA: Provides secure user authentication with multi-factor support.
- Principle: Least Privilege – Restricts access to authenticated users only.

Network Security:
- HTTPS with ALB: All data is encrypted in transit, ensuring secure communication.
- Data Confidentiality – Protects data against interception.

Data Security:
- S3 Bucket Permissions and Encryption: Buckets are private and use server-side encryption.
- Confidentiality – Prevents unauthorized data access.

Potential Additional Measures that could be taken:
Monitoring and Logging:
- CloudWatch Logs and Alarms: Monitors application activity and triggers alerts for unusual behavior.
- Accountability – Facilitates quick response to security incidents.

Advanced Security Features in Cognito:
- Enable Adaptive Authentication: Use adaptive MFA and anomaly detection to further protect user accounts.

Implement WAF (Web Application Firewall)
- Protects against common web exploits like SQL injection and cross-site scripting.
- Prevents vulnerabilities by filtering malicious traffic.

Enhance Logging with AWS CloudTrail
- Tracks API calls across AWS services


# Sustainability TODO
To improve sustainability across:
Software:
- Efficient Error Handling and Logging: Implement comprehensive error handling and logging to facilitate troubleshooting and ensure reliable operation.
- Making it easier to detect and resolve issues.

Hardware and Infrastructure:
- For consistently used services, implement Reserved Instances or AWS Savings Plans to reduce costs for hardware resources.
- Reserved plans make long-term hardware use more cost-effective, ensuring efficient scaling with stable costs.

Data Centre:
- If there are many users in different regions, it would be beneficial to deploy the service in multiple AWS regions for lower latency for these user.
- A multi-region setup improves application availability in certain regions. 

Resources
- With the use of s3 and ECS, it would be wise to regularly review different sotorage teirs and task usage to ensure the correct use of resouces are provided the resonable amount of aws configurations. If s3 is not being used for what the accont is paying for this should be scaled down according to demand. 
- Adjusting resoures based on real usage and data need would prevent over-provising and keep costs appropriate, without compromising performance. 
